<?xml version="1.0" encoding="UTF-8"?>
<UserControl x:Class="Flow.Launcher.Plugin.ByteStash.Views.SnippetPreview"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:resources="clr-namespace:Flow.Launcher.Plugin.ByteStash.Resources"
             mc:Ignorable="d"
             d:DesignHeight="450"
             d:DesignWidth="800"
             Background="Transparent">
    <UserControl.Resources>
        <Style TargetType="TextBlock"
               x:Key="TitleStyle">
            <Setter Property="FontWeight"
                    Value="Bold" />
            <Setter Property="FontSize"
                    Value="18" />
            <Setter Property="Margin"
                    Value="0,0,0,10" />
        </Style>
        <Style TargetType="TextBlock"
               x:Key="DescriptionStyle">
            <Setter Property="Opacity"
                    Value="0.7" />
            <Setter Property="Margin"
                    Value="0,0,0,12" />
            <Setter Property="FontSize"
                    Value="12" />
            <Setter Property="TextWrapping"
                    Value="Wrap" />
        </Style>
        <Style TargetType="TextBlock"
               x:Key="CodeStyle">
            <Setter Property="FontFamily"
                    Value="Consolas, Courier New, Monospace" />
            <Setter Property="FontSize"
                    Value="12" />
            <Setter Property="TextWrapping"
                    Value="Wrap" />
        </Style>
        <Style TargetType="Border"
               x:Key="CodeBorderStyle">
            <Setter Property="Background"
                    Value="{DynamicResource Color00B}" />
            <Setter Property="BorderBrush"
                    Value="{DynamicResource Color03B}" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="CornerRadius"
                    Value="6" />
            <Setter Property="Padding"
                    Value="12" />
            <Setter Property="Margin"
                    Value="0,8,0,8" />
        </Style>
        <Style TargetType="Border"
               x:Key="TagStyle">
            <Setter Property="Background"
                    Value="{DynamicResource Color00B}" />
            <Setter Property="BorderBrush"
                    Value="{DynamicResource Color03B}" />
            <Setter Property="BorderThickness"
                    Value="1" />
            <Setter Property="CornerRadius"
                    Value="6" />
            <Setter Property="Padding"
                    Value="8,4" />
            <Setter Property="Margin"
                    Value="0,0,8,4" />
        </Style>
    </UserControl.Resources>
    <ScrollViewer VerticalScrollBarVisibility="Auto"
                  HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="16">
            <!-- Header Section -->
            <TextBlock x:Name="TitleTextBlock"
                       Style="{StaticResource TitleStyle}"
                       Text="Snippet Title" />
            <TextBlock x:Name="DescriptionTextBlock"
                       Style="{StaticResource DescriptionStyle}"
                       Text="Snippet Description" />
            <!-- Categories -->
            <ItemsControl x:Name="CategoriesPanel"
                          Margin="0,0,0,12"
                          d:ItemsSource="{d:SampleData ItemCount=3}">
                <ItemsControl.ItemsPanel>
                    <ItemsPanelTemplate>
                        <WrapPanel Orientation="Horizontal" />
                    </ItemsPanelTemplate>
                </ItemsControl.ItemsPanel>
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <Border Style="{StaticResource TagStyle}">
                            <TextBlock Text="{Binding}"
                                       FontSize="12" />
                        </Border>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <Separator Margin="0,0,0,12" />
            <!-- Fragments Section -->
            <ItemsControl x:Name="FragmentsPanel"
                          d:ItemsSource="{d:SampleData ItemCount=2}">
                <ItemsControl.ItemTemplate>
                    <DataTemplate>
                        <StackPanel Margin="0,4,0,4">
                            <Grid Margin="0,0,0,3">
                                <Grid.ColumnDefinitions>
                                    <ColumnDefinition Width="*" />
                                    <ColumnDefinition Width="Auto" />
                                </Grid.ColumnDefinitions>
                                <TextBlock Grid.Column="0"
                                           Text="{Binding Fragment.File_name}"
                                           FontWeight="SemiBold"
                                           FontSize="12"
                                           VerticalAlignment="Center" />
                                <StackPanel Grid.Column="1"
                                            Orientation="Horizontal">
                                    <Border Style="{StaticResource TagStyle}"
                                            Margin="0,0,8,0">
                                        <TextBlock Text="{Binding Fragment.Language}"
                                                   FontSize="12" />
                                    </Border>
                                    <Button Command="{Binding CopyCommand}"
                                            ToolTip="{x:Static resources:Strings.SnippetPreview_CopyCode_Tooltip}"
                                            Width="30"
                                            Height="30"
                                            Padding="3">
                                        <Image Source="{Binding CopyIconPath}"
                                               Width="20"
                                               Height="20"
                                               Stretch="Uniform" />
                                    </Button>
                                </StackPanel>
                            </Grid>
                            <Border Style="{StaticResource CodeBorderStyle}">
                                <TextBlock Text="{Binding Fragment.Code}"
                                           Style="{StaticResource CodeStyle}" />
                            </Border>
                        </StackPanel>
                    </DataTemplate>
                </ItemsControl.ItemTemplate>
            </ItemsControl>
            <!-- Footer with metadata -->
            <Separator Margin="0,12,0,8" />
            <StackPanel Orientation="Horizontal">
                <Image Source="{Binding UpdatedIconPath}"
                       Width="22"
                       Height="22"
                       Margin="0,0,4,0"
                       VerticalAlignment="Top"
                       Stretch="Uniform" />
                <TextBlock x:Name="UpdatedAtTextBlock"
                           Opacity="0.6"
                           FontSize="12"
                           VerticalAlignment="Center" />
                <TextBlock Text=" â€¢ "
                           Opacity="0.6"
                           FontSize="12"
                           Margin="4,0"
                           VerticalAlignment="Center" />
                <TextBlock x:Name="ShareCountTextBlock"
                           Opacity="0.6"
                           FontSize="12"
                           VerticalAlignment="Center" />
            </StackPanel>
        </StackPanel>
    </ScrollViewer>
</UserControl>